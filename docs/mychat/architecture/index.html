<!DOCTYPE html>
<html lang='en' ><meta charset="utf-8">
<meta name="viewport" content="width=device-width">


<title>Architecture | MyChat | Home</title>
<link rel="stylesheet" href="/css/eureka.min.css">
<script defer src="/js/eureka.min.js"></script>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
  href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap"
  as="style" onload="this.onload=null;this.rel='stylesheet'">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/styles/solarized-light.min.css"
   media="print"
  onload="this.media='all';this.onload=null" crossorigin>
<script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/highlight.min.js"
   crossorigin></script>

  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/dart.min.js"
     crossorigin></script>

<script defer src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/js/all.min.js"
   integrity="sha256-uNYoXefWRqv&#43;PsIF/OflNmwtKM4lStn9yrz2gVl6ymo="  crossorigin></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
   integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3&#43;Aro6EYUG4&#43;cU&#43;KJWu/X"  media="print"
  onload="this.media='all';this.onload=null" crossorigin>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" 
  integrity="sha384-g7c&#43;Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI&#43;sEnkvrMWph2EDg4"  crossorigin></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"
   integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC&#43;Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa"  crossorigin></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
        { left: "\\(", right: "\\)", display: false },
        { left: "\\[", right: "\\]", display: true }
      ],
    });
  });
</script>



<meta name="description"
  content="Overall Architecture of MyChat">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
      "@type": "ListItem",
      "position": 1 ,
      "name":"Docs",
      "item":"/docs/"},{
      "@type": "ListItem",
      "position": 2 ,
      "name":"MyChat",
      "item":"/docs/mychat/"},{
      "@type": "ListItem",
      "position": 3 ,
      "name":"Architecture",
      "item":"/docs/mychat/architecture/"}]
}
</script>



<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/docs/mychat/architecture/"
    },
    "headline": "Architecture | MyChat | Home","datePublished": "2021-03-13T00:00:00+00:00",
    "dateModified": "2021-03-13T00:00:00+00:00",
    "wordCount":  313 ,
    "publisher": {
        "@type": "Person",
        "name": "Home",
        },
    "description": "Overall Architecture of MyChat"
}
</script><meta property="og:title" content="Architecture | MyChat | Home" />
<meta property="og:type" content="article" />



<meta property="og:url" content="/docs/mychat/architecture/" />



<meta property="og:description" content="Overall Architecture of MyChat" />



<meta property="og:locale" content="en" />




<meta property="og:site_name" content="Home" />






<meta property="article:published_time" content="2021-03-13T00:00:00&#43;00:00" />


<meta property="article:modified_time" content="2021-03-13T00:00:00&#43;00:00" />



<meta property="article:section" content="docs" />


<meta property="article:tag" content="Messaging" />

<meta property="article:tag" content="Architecture" />

<meta property="article:tag" content="SSE" />





<body class="flex flex-col min-h-screen">
  <header class="fixed flex items-center w-full min-h-16 pl-scrollbar z-50 bg-secondary-bg shadow-sm">
    <div class="w-full max-w-screen-xl mx-auto"><script>
    let storageColorScheme = localStorage.getItem("lightDarkMode")
    if (((storageColorScheme == 'Auto' || storageColorScheme == null) && window.matchMedia("(prefers-color-scheme: dark)").matches) || storageColorScheme == "Dark") {
        document.getElementsByTagName('html')[0].classList.add('dark')
    }
</script>
<nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0">
    <a href="/" class="mr-6 text-primary-text text-xl font-bold">Home</a>
    <button id="navbar-btn" class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
        <i class="fas fa-bars"></i>
    </button>

    <div id="target"
        class="hidden block md:flex md:flex-grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20">
        <div class="md:flex md:h-16 text-sm md:flex-grow pb-4 md:pb-0 border-b md:border-b-0">
            <a href="/posts/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  mr-4">Posts</a>
            <a href="/docs/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  selected-menu-item  mr-4">Docs</a>
        </div>

        <div class="flex">
            <div class="relative pt-4 md:pt-0">
                <div class="cursor-pointer hover:text-eureka" id="lightDarkMode">
                    <i class="fas fa-adjust"></i>
                </div>
                <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id="is-open">
                </div>
                <div class="absolute flex flex-col left-0 md:left-auto right-auto md:right-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40"
                    id='lightDarkOptions'>
                    <span class="px-4 py-1 hover:text-eureka" name="Light">Light</span>
                    <span class="px-4 py-1 hover:text-eureka" name="Dark">Dark</span>
                    <span class="px-4 py-1 hover:text-eureka" name="Auto">Auto</span>
                </div>
            </div>
        </div>
    </div>

    <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id="is-open-mobile">
    </div>

</nav>
<script>
    let element = document.getElementById('lightDarkMode')
    if (storageColorScheme == null || storageColorScheme == 'Auto') {
        document.addEventListener('DOMContentLoaded', () => {
            switchMode('Auto')
        })
    } else if (storageColorScheme == "Light") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'sun')
        element.firstElementChild.classList.add('fa-sun')
    } else if (storageColorScheme == "Dark") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'moon')
        element.firstElementChild.classList.add('fa-moon')
    }

    document.addEventListener('DOMContentLoaded', () => {
        getcolorscheme();
        switchBurger();
    });
</script>
</div>
  </header>
  <main class="flex-grow pt-16">
    <div class="pl-scrollbar">
      <div class="w-full max-w-screen-xl lg:px-4 xl:px-8 mx-auto">


<div class="lg:pt-12">
    <div class="flex flex-col md:flex-row bg-secondary-bg rounded">
        <div class="md:w-1/4 lg:w-1/5 border-r">
            <div class="sticky top-16 pt-6">
                










<div id="sidebar-title" class="md:hidden mx-4 px-2 pt-4 pb-2 md:border-b text-tertiary-text md:text-primary-text">
    <span class="font-semibold">Table of Contents</span>
    <i class="fas fa-caret-right ml-1"></i>
</div>

<div id="sidebar-toc"
    class="hidden md:block overflow-y-auto mx-6 md:mx-0 pr-6 pt-2 md:max-h-doc-sidebar bg-primary-bg md:bg-transparent">
    <div class="flex flex-wrap ml-4 -mr-2 p-2 bg-secondary-bg md:bg-primary-bg rounded">
        <a class=" hover:text-eureka"
            href="/docs/mychat/">MyChat</a>
        
        
        


    </div>
    
<ul class="pl-6">
    
    
    
    <li class="py-2">
        <div class="">
            <a class=" text-eureka  hover:text-eureka"
                href="/docs/mychat/architecture/">Architecture</a>
        </div>
        
    </li>
    
    
    
    
    <li class="py-2">
        <div class="">
            <a class=" hover:text-eureka"
                href="/docs/mychat/requirements/">Requirements</a>
        </div>
        
    </li>
    
    
</ul>

</div>





            </div>

        </div>
        <div class="w-full md:w-3/4 lg:w-4/5 pb-8 pt-2 md:pt-8">
            <div class="w-full lg:w-3/4 pl-6 ml-0 mr-auto">
                <h1 class="font-bold text-3xl text-primary-text">Architecture</h1>
                <div class="flex flex-wrap flex-row items-center mt-2 text-tertiary-text">
    <div class="mr-6 my-2">
        <i class="fas fa-calendar mr-1"></i>
        <span>2021-03-13</span>
    </div>
    <div class="mr-6 my-2">
        <i class="fas fa-clock mr-1"></i>
        <span>2 min read</span>
    </div>
    
    
    <div class="mr-6 my-2">
        <i class="fas fa-folder mr-1"></i>
        
        <a href="/categories/chat/" class="hover:text-eureka">Chat</a>
        
        
        <span>, </span>
        <a href="/categories/messaging/" class="hover:text-eureka">Messaging</a>
        
    </div>
    

    
</div>
            </div>
            <div class="flex">
                <div class="w-full lg:w-3/4 px-6">
                    
                    
                    <div class="content">
                        <p><em>This document describes the overall architecture for MyChat - a hypothetical chat/messaging system.</em></p>
<figure>
    <img src="/images/logo.png" width="100" height="200"/> 
</figure>

<p>Date: 2021-03-13</p>
<p><strong>Status: Draft</strong></p>
<h2 id="objectives">Objectives</h2>
<p>The objectives of this architecture document are to outline the architectural elements for the MyChat
messaging service. This architecture should provide enough clarity for developers to create more detailed design documents for each of the major architectural components (if required).</p>
<h3 id="scope">Scope</h3>
<p>This document only provides a overall the high-level architecture for MyChat.</p>
<h3 id="assumptions">Assumptions</h3>
<p>The following assumptions have been made in regards to this document:</p>
<ul>
<li>A known set of requirements have been created and accepted.</li>
<li>A basic understanding of chat/messaging system architecture.</li>
<li>A basic understanding of right-sized services.</li>
</ul>
<hr>
<h2 id="domains">Domains</h2>
<p>The following are the top level domains:</p>
<figure>
    <img src="/images/domains.png"/> 
</figure>

<hr>
<h2 id="components">Components</h2>
<p>The MyChat service consists of the following components:</p>
<ul>
<li>
<p>Account Management Service</p>
<ul>
<li>User Profile (name, email, phone, address, etc.)</li>
<li>User Preferences (language, Timezone, etc.)</li>
<li>Identity Service (SSO, MFA, etc.)</li>
</ul>
</li>
<li>
<p>Chat Spaces</p>
<ul>
<li>Manage chat Spaces (create, delete, modify, add/delete users)</li>
<li></li>
</ul>
</li>
<li>
<p>Notification Service</p>
<ul>
<li>Handle communications with users via (email, SMS)
<ul>
<li>Notify if of new messages</li>
<li>Invitation to join a chat Space</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Message Service</p>
<ul>
<li>Handle SSE for chat spaces</li>
<li>Handle input of messages to chat spaces</li>
</ul>
</li>
</ul>
<hr>
<h2 id="database-requirements">Database Requirements</h2>
<p>Databases schemas should be designed based on the type of required queries.</p>
<h3 id="account-management">Account Management</h3>
<p>The Account Management domain has the following database queries:</p>
<ul>
<li>Get account information by account ID</li>
</ul>
<h3 id="chat-spaces">Chat Spaces</h3>
<p>The Chat Spaces domain has the following database queries:</p>
<h3 id="notifications">Notifications</h3>
<p>The Notification domain has the following database queries:</p>
<hr>
<h2 id="questions-to-be-resolved">Questions to be Resolved</h2>
<ul>
<li><input disabled="" type="checkbox"> How do determine the SSE &ldquo;capacity&rdquo; of servers?</li>
<li><input disabled="" type="checkbox"> Do we need to setup GEO-located servers to meet the latency requirements?</li>
<li><input disabled="" type="checkbox"> Can we use a &ldquo;wrapped&rdquo; Webview for desktop applications?</li>
<li><input disabled="" type="checkbox"> How do we manage the encryption keys for encrypted data (when to rotate, who owns the private key etc.)</li>
</ul>
<hr>
<h2 id="references">References</h2>
<ul>
<li><a href="https://www.w3.org/TR/eventsource/">W3C SSE</a></li>
<li><a href="https://ably.com/topic/server-sent-events">SSE Deep Dive</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events">Mozilla SSE</a></li>
<li><a href="https://medium.com/blogging-greymatter-io/server-sent-events-http-2-and-envoy-6927c70368bb">Quick Primer on SSE</a></li>
<li><a href="https://github.com/r3labs/sse/tree/v2">Golang SSE Server and Client</a></li>
<li><a href="https://medium.com/wesionary-team/server-sent-events-with-go-and-react-76df101a3efe">React SSE Client</a></li>
<li><a href="https://github.com/bajro17/golang-simple-sse-chat/blob/master/templates/index.html">Simple Chat with SSE</a></li>
</ul>
                    </div>
                    
                    <div class="my-4">
    
    <a href="/tags/messaging/" class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#Messaging</a>
    
    <a href="/tags/architecture/" class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#Architecture</a>
    
    <a href="/tags/sse/" class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#SSE</a>
    
</div>
                    
                    

                    

                    
<div class="flex flex-col md:flex-row md:justify-between -mx-2 mt-4 px-2 pt-4 border-t">
    <div>
        
    </div>
    <div class="md:text-right mt-4 md:mt-0">
        
        <span class="block font-bold">Next</span>
        <a href="/docs/mychat/requirements/" class="block">Requirements</a>
        
    </div>
</div>

                    
                </div>
                
                <div class="hidden lg:block lg:w-1/4">
                    
                    <div class="sticky top-16 z-10 hidden lg:block px-6 py-4  bg-secondary-bg pt-16 -mt-16 ">
    <span class="text-lg font-semibold">On This Page</span>
</div>
<div class="sticky-toc hidden lg:block px-6 pb-6  pt-10 -mt-10 border-l ">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#objectives">Objectives</a>
      <ul>
        <li><a href="#scope">Scope</a></li>
        <li><a href="#assumptions">Assumptions</a></li>
      </ul>
    </li>
    <li><a href="#domains">Domains</a></li>
    <li><a href="#components">Components</a></li>
    <li><a href="#database-requirements">Database Requirements</a>
      <ul>
        <li><a href="#account-management">Account Management</a></li>
        <li><a href="#chat-spaces">Chat Spaces</a></li>
        <li><a href="#notifications">Notifications</a></li>
      </ul>
    </li>
    <li><a href="#questions-to-be-resolved">Questions to be Resolved</a></li>
    <li><a href="#references">References</a></li>
  </ul>
</nav>
</div>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        enableStickyToc();
    });
</script>
                    
                </div>
                
            </div>

        </div>


    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        hljs.initHighlightingOnLoad();
        changeSidebarHeight();
        switchDocToc();
    })
</script>









      </div>
    </div>
    
  </main>
  <footer class="pl-scrollbar">
    <div class="w-full max-w-screen-xl mx-auto"><div class="text-center p-6 pin-b">
    <p class="text-sm text-tertiary-text">&copy; 2021 <a href="https://pmackay.com/">Paul MacKay</a>
 &middot;  Powered by the <a href="https://github.com/wangchucheng/hugo-eureka" class="hover:text-eureka">Eureka</a> theme for <a href="https://gohugo.io" class="hover:text-eureka">Hugo</a></p>
</div></div>
  </footer>
</body>

</html>